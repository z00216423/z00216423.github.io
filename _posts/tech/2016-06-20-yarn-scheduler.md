---
layout: post
title: YARN的资源调度器
category: 技术
tags: blog
---

我们知道YARN是一个典型的双层调度框架，第一层调度负责对不同应用框架的资源分配与调度，主要是由调度器来实现；第二层调度是应用内的任务调度与管理，这部分职责交给Application Master来实现。目前，YARN中有三种调度可选择： `FIFO Scheduler`、`Capaticity Scheduler`、`Fair Scheduler`。

### FIFO Scheduler
`FIFO Scheduler`是最简单的调度，只能应用于单队列应用的调度，所有应用安提交时间先后顺序排成队列，按照先进先出原则进行资源分配。只有分配完先提交应用需求后，才能开始下一个应用的资源分配。优点是，简单易实现，不需要任何配置。缺点也很明显，大的应用可能会占用所有资源，导致其他应用被挂起，因此不适用于共享集群的资源调度。

### Capaticity Scheduler
Capacity 调度器允许多个组织共享整个集群，每个组织可以获得集群的一部分计算能力。通过为每个组织分配专门的队列，然后再为每个队列分配一定的集群资源，这样整个集群就可以通过设置多个队列的方式给多个组织提供服务了。除此之外，队列内部又可以垂直划分，这样一个组织内部的多个成员就可以共享这个队列资源了，在一个队列内部，资源的调度是采用的是先进先出(FIFO)策略。队列结构可嵌套，子队列继承父队列的配置，队列总资源累加起来正好100%，否则会出错。应用可以提交至一个或者多个队列中运行，但是必须提交至队列的叶子节点。队列名称为队列树的按上下层级排列的全路径名称。如果队列不存在，我们在提交任务时就会收到错误。如果我们没有定义任何队列，所有的应用将会放在一个default队列中。  
优点：
1. 支持多队列调度，支持优先级
－ 弹性队列，可为队列设置一个最大资源使用量。

### Fair Scheduler
Fair调度器的设计目标是为所有的应用分配公平的资源（对公平的定义可以通过参数来设置）。


